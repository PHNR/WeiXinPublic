<include file="Public:head"/> 

<link rel="stylesheet" type="text/css" href="{weiwin::RES}/css/cymain.css" />

<script src="/tpl/static/artDialog/jquery.artDialog.js?skin=default"></script>

<script src="/tpl/static/artDialog/plugins/iframeTools.js"></script>

<link rel="stylesheet" href="{weiwin::STATICS}/kindeditor/themes/default/default.css" />

<link rel="stylesheet" href="{weiwin::STATICS}/kindeditor/plugins/code/prettify.css" />

<script src="{weiwin::STATICS}/kindeditor/kindeditor.js" type="text/javascript"></script>

<script src="{weiwin::STATICS}/kindeditor/lang/zh_CN.js" type="text/javascript"></script>

<script src="{weiwin::STATICS}/kindeditor/plugins/code/prettify.js" type="text/javascript"></script>

<script src="./tpl/User/default/common/js/cart/jscolor.js" type="text/javascript"></script>



<script type="text/javascript" src="/tpl/User/default/common/js/jQuery.js"></script>





<script src="{weiwin::RES}/js/date/WdatePicker.js"></script>







<script type="text/javascript" src="{weiwin::RES}/js/formCheck/formcheck.js"> </script>







<script src="{weiwin::STATICS}/kindeditor/plugins/code/prettify.js" type="text/javascript"></script>























<script>















var editor;







KindEditor.ready(function(K) {







editor = K.create('#content', {







resizeType : 1,







allowPreviewEmoticons : false,







allowImageUpload : false,







items : [







'source','undo','clearhtml','hr',







'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',







'insertunorderedlist', '|', 'emoticons', 'image','link', 'unlink','baidumap','lineheight','table','anchor','preview','print','template','code','cut']







});















});







KindEditor.ready(function(K) {







editor = K.create('#content2', {







resizeType : 1,







allowPreviewEmoticons : false,







allowImageUpload : false,







items : [







'source','undo','clearhtml','hr',







'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',







'insertunorderedlist', '|', 'emoticons', 'image','link', 'unlink','baidumap','lineheight','table','anchor','preview','print','template','code','cut']







});















});







</script>







<script>







function selectall(name) {







	var checkItems=$('.cbitem');







	if ($("#check_box").attr('checked')==false) {







		$.each(checkItems, function(i,val){







			val.checked=false;







		});







		







	} else {







		$.each(checkItems, function(i,val){







			val.checked=true;







		});







	}







}







function setlatlng(longitude,latitude){







	art.dialog.data('longitude', longitude);







	art.dialog.data('latitude', latitude);







	// 此时 iframeA.html 页面可以使用 art.dialog.data('test') 获取到数据，如：







	// document.getElementById('aInput').value = art.dialog.data('test');







	art.dialog.open('{weiwin::U('Map/setLatLng',array('token'=>$token,'id'=>$id))}',{lock:false,title:'设置经纬度',width:600,height:400,yesText:'关闭',background: '#000',opacity: 0.87});







}







</script>







<div class="content"  >







   <div class="cLineB"> 







    <h4>编辑贺卡</h4> 







    <a href="{weiwin::U('Heka/index',array('token'=>$token))}" class="right  btnGreen" style="margin-top:-27px">返回</a> 







   </div> 















   <form class="form" method="post" id="form" action="" enctype="multipart/form-data"> 







<if condition="$isUpdate eq 1">







<input type="hidden" name="id" value="{weiwin:$set.id}" />







</if>







    <div class="msgWrap bgfc"> 







     <table class="userinfoArea" style=" margin:0;" border="0" cellspacing="0" cellpadding="0" width="100%"> 







      <tbody> 







       







	   <tr> 







        <th><span class="red">*</span>标题名字：</th>







        <td><input type="text" name="title" id="title" value="{weiwin:$set.title}" class="px" style="width:400px;" />







		</td> 







       </tr>







	  <tr> 







        <th><span class="red">*</span>关键词：</th>







        <td><input type="text" name="keyword" id="keyword" value="{weiwin:$set.keyword}" class="px" style="width:400px;" />







		</td> 







       </tr>







	   <tr> 







        <th><span class="red"></span>回复图片：</th>







        <td><input type="text" name="topic" value="{weiwin:$set.topic}" id="pic" class="px" style="width:400px;"  readonly="readonly"/><script src="/tpl/static/upyun.js"></script><a href="###" onclick="upyunPicUpload('pic',700,420,'{weiwin:$token}')" class="a_upload">上传</a> <a href="###" onclick="viewImg('pic')">预览</a></td> 







       </tr>







	   <tr> 







        <th><span class="red"></span>背景图片：</th>







        <td><input type="text" name="bg_topic" value="{weiwin:$set.bg_topic}" id="small_pic" class="px" style="width:400px;"  readonly="readonly"/><script src="/tpl/static/upyun.js"></script><a href="###" onclick="upyunPicUpload('small_pic',700,420,'{weiwin:$token}')" class="a_upload">上传</a> <a href="###" onclick="viewImg('small_pic')">预览</a></td> 







       </tr>







	   <tr> 







        <th><span class="red"></span>背景音乐：</th>







        <td><input type="text" name="bg_music" value="{weiwin:$set.bg_music}" id="site_map_1" class="px" style="width:400px;" />







			<span>要输入完整的地址</span>







		</td> 







       </tr>







	   <tr> 







        <th ><span class="red">*</span>选择动画：</th> 







        <td>        <select name="bg_action"   > 







                    <option   value="">请选择</option>







                    <option  value="0" <if condition="$set['bg_action'] eq 0">selected</if> >无动画</option>







                    <option   value="1" <if condition="$set['bg_action'] eq 1">selected</if> >下落的枫叶</option>







                    <option   value="2" <if condition="$set['bg_action'] eq 2">selected</if> >飘雪</option>







                    <option   value="4" <if condition="$set['bg_action'] eq 4">selected</if> >飘玫瑰</option>







					</select>







		</td> 







       </tr> 







	   







	   <TR>







			<TH valign="top"><label for="info">贺卡内容：</label></TH>







          
			<script id="editor" name="content" type="text/plain" style="width:590px;height:360px;">{weiwin:$set.content}</script>






				<span class="red">*</span>最多可150字







			</TD>







        </TR> 







		







	   







  















       <tr> 







        <th><span class="red"></span>版权：</th>







        <td><input type="text" name="banquan" value="{weiwin:$set.banquan}" class="px" style="width:400px;" /></td> 







       </tr>







		<tr> 







        <th><span class="red"></span>按钮文字：</th>







        <td><input type="text" name="sub" value="{weiwin:$set.sub}" class="px" style="width:400px;" />可不写</td> 







        </tr>







		<tr> 







        <th><span class="red"></span>是否显示转发数：</th>







        <td>		<select name="show"   > 







                     <option   value="0">不显示</option>







                     <option   value="1" <if condition="$set['show'] eq 1">selected</if> >显示</option>







                    </select></td> 







        </tr>







        <tr> 







        <th><span class="red"></span>收卡名字：</th>







        <td><input type="text" name="name" value="{weiwin:$set.name}" class="px" style="width:400px;" /></td> 







        </tr>







       <tr>         







       <th>&nbsp;</th>







       <td>







		<!--input type="hidden" name="time" value="{weiwin:$set.time}" /-->







       <button type="submit" class="btnGreen">保存</button> &nbsp; <a href="{weiwin::U('Heka/index',array('token'=>$token))}" class="btnGray vm">取消</a></td> 







       </tr> 







	   







      </tbody> 







     </table> 







     </div>







    







   </form> 







  </div> 







<script language="javascript">







$(function(){







	$("#form").valid([







	{ name:"name",simple:"名称",require:true},







	{ name:"keyword",simple:"关键词",require:true}







		







	],true,true);















})







</script>





<script type="text/javascript">

    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    UE.getEditor('editor');


    function isFocus(e){
        alert(UE.getEditor('editor').isFocus());
        UE.dom.domUtils.preventDefault(e)
    }
    function setblur(e){
        UE.getEditor('editor').blur();
        UE.dom.domUtils.preventDefault(e)
    }
    function insertHtml() {
        var value = prompt('插入html代码', '');
        UE.getEditor('editor').execCommand('insertHtml', value)
    }
    function createEditor() {
        enableBtn();
        UE.getEditor('editor');
    }
    function getAllHtml() {
        alert(UE.getEditor('editor').getAllHtml())
    }
    function getContent() {
        var arr = [];
        arr.push("使用editor.getContent()方法可以获得编辑器的内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getContent());
        alert(arr.join("\n"));
    }
    function getPlainTxt() {
        var arr = [];
        arr.push("使用editor.getPlainTxt()方法可以获得编辑器的带格式的纯文本内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getPlainTxt());
        alert(arr.join('\n'))
    }
    function setContent(isAppendTo) {
        var arr = [];
        arr.push("使用editor.setContent('欢迎使用ueditor')方法可以设置编辑器的内容");
        UE.getEditor('editor').setContent('欢迎使用ueditor', isAppendTo);
        alert(arr.join("\n"));
    }
    function setDisabled() {
        UE.getEditor('editor').setDisabled('fullscreen');
        disableBtn("enable");
    }

    function setEnabled() {
        UE.getEditor('editor').setEnabled();
        enableBtn();
    }

    function getText() {
        //当你点击按钮时编辑区域已经失去了焦点，如果直接用getText将不会得到内容，所以要在选回来，然后取得内容
        var range = UE.getEditor('editor').selection.getRange();
        range.select();
        var txt = UE.getEditor('editor').selection.getText();
        alert(txt)
    }

    function getContentTxt() {
        var arr = [];
        arr.push("使用editor.getContentTxt()方法可以获得编辑器的纯文本内容");
        arr.push("编辑器的纯文本内容为：");
        arr.push(UE.getEditor('editor').getContentTxt());
        alert(arr.join("\n"));
    }
    function hasContent() {
        var arr = [];
        arr.push("使用editor.hasContents()方法判断编辑器里是否有内容");
        arr.push("判断结果为：");
        arr.push(UE.getEditor('editor').hasContents());
        alert(arr.join("\n"));
    }
    function setFocus() {
        UE.getEditor('editor').focus();
    }
    function deleteEditor() {
        disableBtn();
        UE.getEditor('editor').destroy();
    }
    function disableBtn(str) {
        var div = document.getElementById('btns');
        var btns = domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            if (btn.id == str) {
                domUtils.removeAttributes(btn, ["disabled"]);
            } else {
                btn.setAttribute("disabled", "true");
            }
        }
    }
    function enableBtn() {
        var div = document.getElementById('btns');
        var btns = domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            domUtils.removeAttributes(btn, ["disabled"]);
        }
    }

    function getLocalData () {
        alert(UE.getEditor('editor').execCommand( "getlocaldata" ));
    }

    function clearLocalData () {
        UE.getEditor('editor').execCommand( "clearlocaldata" );
        alert("已清空草稿箱")
    }

</script>

  <include file="Public:footer" />